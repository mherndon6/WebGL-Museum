<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html;charset=utf-8" >
		<title>Museum</title>
		<link rel="shortcut icon" href="http://png.findicons.com/files/icons/2778/maki/48/museum_24_2x.png" type="image/x-icon" />

		<script id="vertex-shader" type="x-shader/x-vertex">

			attribute vec4 vPosition;
			attribute vec4 vNormal;
			attribute vec2 vTexCoord;

			varying vec4 lightColor;
			varying vec2 fTexCoord;

			uniform vec4 vAmbientProduct, vDiffuseProduct, vSpecularProduct;
			uniform vec4 lightPosition;
			uniform float vShininess;
			uniform mat4 matrix;

			void main() {
				// Calculate Gauraud vars, pass to fragment shader
			    // pos is vertex position
			    vec3 pos = -vPosition.xyz;
			    // vector from vertex position to light source
			    vec3 vL = normalize(lightPosition.xyz - pos);
			    // Because the eye point the is at the origin
			    // the vector from the vertex position to the eye is
			    vec3 vE = -normalize(pos);
			    // halfway vector
			    vec3 vH = normalize(vL + vE);
			    // Transform vertex normal into eye coordinates
			    vec3 vN = normalize(vNormal.xyz);
			    // Compute terms in the illumination equation
			    vec4 ambient = vAmbientProduct;
			    float Kd = max(dot(vL, vN), 0.0);
			    vec4  diffuse = Kd * vDiffuseProduct;
			    float Ks = pow(max(dot(vN, vH), 0.0), vShininess);
			    vec4  specular = Ks * vSpecularProduct;
			    if(dot(vL, vN) < 0.0)
					specular = vec4(0.0, 0.0, 0.0, 1.0);
			    lightColor = ambient + diffuse + specular;
				lightColor.a = 1.0;

				// Apply translation, rotation, perspective to the position
				fTexCoord = vTexCoord;
				gl_Position = matrix * vPosition;
			}

		</script>

		<script id="fragment-shader" type="x-shader/x-fragment">

			precision mediump float;

			uniform bool isLit;
			uniform bool isTextured;
			uniform sampler2D texture;

			varying vec4 lightColor;
			varying vec2 fTexCoord;

			uniform vec4 vColor;

			void main() {
				if (isTextured && isLit)
					gl_FragColor = lightColor + texture2D(texture, fTexCoord);
				else if (isTextured)
					gl_FragColor = texture2D(texture, fTexCoord);
				else if (isLit)
					gl_FragColor = vColor + lightColor;
				else
					gl_FragColor = vColor;
			}

		</script>

		<script type="text/javascript" src="webgl-utils.js"></script>
		<script type="text/javascript" src="initShaders.js"></script>
		<script type="text/javascript" src="MV.js"></script>
		<script type="text/javascript" src="vars.js"></script>
		<script type="text/javascript" src="res/textures.js"></script>
		<script type="text/javascript" src="map.js"></script>
		<script type="text/javascript" src="museum.js"></script>

	</head>

	    <canvas id="gl-canvas" width="960" height="540">
	        Your browser doesn't support the HTML5 canvas element
        </canvas>

        <img id='carpet1.png' src='res/carpet1.png' hidden/>
        <img id='ceiling1.png' src='res/ceiling1.png' hidden/>
        <img id='drywall.jpg' src='res/drywall.jpg' hidden/>
        <img id='door.jpg' src='res/door.jpg' hidden/>
        <img id='scott.png' src='res/scott.png' hidden/>
        <img id='elevator.png' src='res/elevator.png' hidden/>
        <img id='floor1.png' src='res/floor1.png' hidden/>
        <img id='floor2.png' src='res/floor2.png' hidden/>
        
        <!-- paintings -->
        <img id='oath-of-horatii.png' src='res/oath-of-horatii.png' hidden/>
        <img id='napoleon.png' src='res/napoleon.png' hidden/>
        <img id='the-death-of-general-wolfe.png' src='res/the-death-of-general-wolfe.png' hidden/>
        <img id='ulysses-deriding-polyphemus.png' src='res/ulysses-deriding-polyphemus.png' hidden/>
        <img id='moonlit-landscape.png' src='res/moonlit-landscape.png' hidden/>
        <img id='xp-theme.png' src='res/xp-theme.png' hidden/>
        <img id='sunday-afternoon.png' src='res/sunday-afternoon.png' hidden/>
        <img id='pearl-earring.png' src='res/pearl-earring.png' hidden/>
        <img id='mona-lisa.png' src='res/mona-lisa.png' hidden/>
	<img id='starry-night.png' src='res/starry-night.png' hidden/>
        <img id='ecce-homo.png' src='res/ecce-homo.png' hidden/>
        <img id='het-steen.png' src='res/het-steen.png' hidden/>
        <img id='sunset.png' src='res/sunset.png' hidden/>
        <img id='sleigh-ride.png' src='res/sleigh-ride.png' hidden/>
        <img id='phaeton.png' src='res/phaeton.png' hidden/>
        <img id='nocturne.png' src='res/nocturne.png' hidden/>
        <img id='impression-sunrise.png' src='res/impression-sunrise.png' hidden/>
        <img id='the-weeping-woman.png' src='res/the-weeping-woman.png' hidden/>
        <img id='snow-storm.png' src='res/snow-storm.png' hidden/>
        <img id='the-scream.png' src='res/the-scream.png' hidden/>
        <img id='the-last-day-of-pompeii.png' src='res/the-last-day-of-pompeii.png' hidden/>

	<audio id='door.wav' src='res/door.wav' hidden/>
</html>
